!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.dogescript=e()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){var beautify=_dereq_("js-beautify").js_beautify;var xhr=_dereq_("xhr");var parser=_dereq_("./lib/parser");function parse(file,beauty,dogeMode){if(dogeMode)var lines=file.split(/ {3,}|\r?\n/);else var lines=file.split(/\r?\n/);var script="";for(var i=0;i<lines.length;i++){script+=parser(lines[i])}if(beauty)return beautify(script);else return script}module.exports=parse;if(typeof window!=="undefined"&&window!==null){var queue=[];var seen=[];var stepQueue=function(){while(queue.length>0&&queue[0].ready){var script=queue.shift();exec(script.text)}};var exec=function(source){var js=";\n"+parse(source);if(js){with(window){eval(js)}}};var getLoadEval=function(script,callback){var res={type:"load",ready:false,text:null};xhr(script.getAttribute("src"),function(err,resp,body){if(err)return callback(err);if(!err&&body){res.ready=true;res.text=body;return callback(null,res)}})};var getInlineEval=function(script){return{type:"inline",ready:true,text:script.innerHTML}};var processTags=function(){var scripts=document.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){var script=scripts[i];if(seen.indexOf(script)>-1){continue}seen.push(script);if(script.getAttribute("type")==="text/dogescript"){if(script.getAttribute("src")){getLoadEval(script,function(err,res){if(err)throw err;queue.push(res);stepQueue()})}else{queue.push(getInlineEval(script));stepQueue()}}}};if(window.addEventListener){window.addEventListener("DOMContentLoaded",processTags)}else{window.attachEvent("onload",processTags)}}},{"./lib/parser":2,"js-beautify":3,xhr:7}],2:[function(_dereq_,module,exports){var multiComment=false;var multiLine=false;var validKeys={is:" === ",not:" !== ",and:" && ",or:" || ",next:"; ",as:" = ",more:" += ",less:" -= ",lots:" *= ",few:" /= ",very:" var ",smaller:" < ",bigger:" > ",smallerish:" <= ",biggerish:" >= ",notrly:" ! "};var valid=["such","wow","wow&","plz",".plz","dose","very","shh","quiet","loud","rly","but","many","much","so","trained","debooger","maybe"];module.exports=function parse(line){line=line.replace(/dogeument/g,"document").replace(/windoge/g,"window");var keys=line.match(/'[^']+'|\S+/g);var statement="";if(keys===null)return line+"\n";if(valid.indexOf(keys[0])===-1&&keys[1]!=="is"&&keys[1]!=="dose"||multiComment&&keys[0]!=="loud"||multiLine&&keys[0]!=="wow")return line+"\n";if(keys[0]==="trained"){statement+='"use strict";\n'}if(keys[0]==="such"){statement+="function "+keys[1];if(keys[2]==="much"){statement+=" (";for(var i=3;i<keys.length;i++){statement+=keys[i];if(i!==keys.length-1)statement+=", "}statement+=") { \n"}else{statement+=" () { \n"}}if(keys[0]==="wow"||keys[0]==="wow&"){multiLine=false;if(typeof keys[1]!=="undefined"){statement+="return";for(var i=1;i<keys.length;i++){statement+=" "+keys[i]}statement+=";\n";if(keys[0]==="wow&")statement+="}) \n";else statement+="} \n"}else if(keys[0]==="wow&"){statement+="}) \n"}else{statement+="} \n"}}if(keys[0]==="plz"||keys[0]===".plz"||keys[0]==="dose"||keys[1]==="dose"){if(keys[1]==="dose")statement+=keys.shift();if(keys[0].charAt(0)==="."||keys[0]==="dose")statement+=".";if(keys[1]==="console.loge"||keys[1]==="loge")keys[1]=keys[1].slice(0,-1);if(keys[2]==="with"){statement+=keys[1]+"(";dupe=keys.slice(0);for(var i=3;i<keys.length;i++){if(keys[i]===","||keys[i]==="&")continue;if(keys[i]==="much"){statement+="function (";if(keys[i+1]){for(var j=i+1;j<keys.length;j++){statement+=keys[j];if(j!==keys.length-1)statement+=", "}statement+=") {\n";return statement}else{statement+=") {\n";return statement}}if(keys[i].substr(-1)==="&"||keys[i].substr(-1)===",")keys[i]=keys[i].slice(0,-1);statement+=keys[i];if(keys[i].substr(-1)===":")statement+=" ";if(i!==keys.length-1&&keys[i].substr(-1)!==":")statement+=", "}if(statement.substr(-2)===", ")statement=statement.slice(0,-2);if(statement.substr(-3)===", ]"||statement.substr(-3)===", }")statement=statement.replace(statement.substr(-3),statement.substr(-1));if(dupe[keys.length-1].slice(-1)==="&")statement+=")\n";else statement+=");\n"}else{if(keys[1].slice(-1)==="&"){keys[1]=keys[1].slice(0,-1);statement+=keys[1]+"()\n"}else{statement+=keys[1]+"();\n"}}}if(keys[0]==="very"){statement+="var "+keys[1]+" = ";if(keys[3]==="new"){statement+="new "+keys[4]+"(";if(keys[5]==="with"){for(var i=6;i<keys.length;i++){if(keys[i]===",")continue;if(keys[i].substr(-1)===","&&keys[i].charAt(keys[i].length-2)!=="}")keys[i]=keys[i].slice(0,-1);statement+=keys[i];if(i!==keys.length-1)statement+=", "}}statement+=");\n";return statement}if(keys[3]==="much"){statement+="function ";if(keys[4]){statement+="(";for(var i=4;i<keys.length;i++){statement+=keys[i];if(i!==keys.length-1)statement+=", "}statement+=") { \n"}else{statement+=" () { \n"}return statement}if(keys.length>4){var recurse="";for(var i=3;i<keys.length;i++){if(keys[i].substr(-1)===","&&keys[i].charAt(keys[i].length-2)!=="}")keys[i]=keys[i].slice(0,-1);recurse+=keys[i]+" "}if(valid.indexOf(keys[3])!==-1||(keys[4]==="is"||keys[4]==="dose"))statement+=parse(recurse);else statement+=recurse+";\n"}else{if(keys[3]==="obj"){statement+="{\n";multiLine=true}else{statement+=keys[3]+";\n"}}}if(keys[1]==="is"){statement+=keys[0]+" = ";if(keys[2]==="new"){statement+="new "+keys[3]+"(";if(keys[4]==="with"){for(var i=5;i<keys.length;i++){if(keys[i]===",")continue;statement+=keys[i];if(i!==keys.length-1)statement+=", "}}statement+=");\n";return statement}if(keys.length>2){var recurse="";for(var i=2;i<keys.length;i++){recurse+=keys[i]+" "}statement+=parse(recurse)}else{statement+=keys[2]+";\n"}}if(keys[0]==="shh"){statement+="//";for(var i=1;i<keys.length;i++){statement+=" "+keys[i]}statement+="\n"}if(keys[0]==="quiet"){statement+="/*";multiComment=true;for(var i=1;i<keys.length;i++){statement+=" "+keys[i]}statement+="\n"}if(keys[0]==="loud"){statement+="*/";multiComment=false;for(var i=1;i<keys.length;i++){statement+=" "+keys[i]}statement+="\n"}var keyParser=function(key){if(validKeys.hasOwnProperty(key)){statement+=validKeys[key];return true}else{return false}};if(keys[0]==="rly"){statement+="if (";for(var i=1;i<keys.length;i++){var parsed=keyParser(keys[i]);if(parsed)continue;statement+=keys[i]+" "}statement+=") {\n"}if(keys[0]==="but"){if(keys[1]==="rly"){statement+="} else if (";for(var i=2;i<keys.length;i++){var parsed=keyParser(keys[i]);if(parsed)continue;statement+=keys[i]+" "}statement+=") {\n"}else{statement+="} else {\n"}}if(keys[0]==="many"){statement+="while (";for(var i=1;i<keys.length;i++){var parsed=keyParser(keys[i]);if(parsed)continue;statement+=keys[i]+" "}statement+=") {\n"}if(keys[0]==="much"){statement+="for (";for(var i=1;i<keys.length;i++){var parsed=keyParser(keys[i]);if(parsed)continue;statement+=keys[i]+" "}statement+=") {\n"}if(keys[0]==="so"){if(keys[2]==="as"){statement+="var "+keys[3]+" = require('"+keys[1]+"');\n"}else{var mod=keys[1];var m=/^..?\/.*?([\w-]+)(\.\w+)?$/.exec(mod);if(m){mod=m[1]}mod=mod.replace(/-/g,"_");statement+="var "+mod+" = require('"+keys[1]+"');\n"}}if(keys[0]==="maybe"){statement+="(!!+Math.round(Math.random()))"}if(keys[0]==="debooger"){statement+="debugger;"}return statement}},{}],3:[function(_dereq_,module,exports){function get_beautify(js_beautify,css_beautify,html_beautify){var beautify=function(src,config){return js_beautify.js_beautify(src,config)};beautify.js=js_beautify.js_beautify;beautify.css=css_beautify.css_beautify;beautify.html=html_beautify.html_beautify;beautify.js_beautify=js_beautify.js_beautify;beautify.css_beautify=css_beautify.css_beautify;beautify.html_beautify=html_beautify.html_beautify;return beautify}if(typeof define==="function"&&define.amd){define(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(js_beautify,css_beautify,html_beautify){return get_beautify(js_beautify,css_beautify,html_beautify)})}else{(function(mod){var js_beautify=_dereq_("./lib/beautify");var css_beautify=_dereq_("./lib/beautify-css");var html_beautify=_dereq_("./lib/beautify-html");mod.exports=get_beautify(js_beautify,css_beautify,html_beautify)})(module)}},{"./lib/beautify":6,"./lib/beautify-css":4,"./lib/beautify-html":5}],4:[function(_dereq_,module,exports){(function(global){(function(){function css_beautify(source_text,options){options=options||{};var indentSize=options.indent_size||4;var indentCharacter=options.indent_char||" ";var selectorSeparatorNewline=options.selector_separator_newline===undefined?true:options.selector_separator_newline;var endWithNewline=options.end_with_newline===undefined?false:options.end_with_newline;if(typeof indentSize==="string"){indentSize=parseInt(indentSize,10)}var whiteRe=/^\s+$/;var wordRe=/[\w$\-_]/;var pos=-1,ch;function next(){ch=source_text.charAt(++pos);return ch}function peek(){return source_text.charAt(pos+1)}function eatString(endChar){var start=pos;while(next()){if(ch==="\\"){next();next()}else if(ch===endChar){break}else if(ch==="\n"){break}}return source_text.substring(start,pos+1)}function eatWhitespace(){var start=pos;while(whiteRe.test(peek())){pos++}return pos!==start}function skipWhitespace(){var start=pos;do{}while(whiteRe.test(next()));return pos!==start+1}function eatComment(singleLine){var start=pos;next();while(next()){if(ch==="*"&&peek()==="/"){pos++;break}else if(singleLine&&ch==="\n"){break}}return source_text.substring(start,pos+1)}function lookBack(str){return source_text.substring(pos-str.length,pos).toLowerCase()===str}function isCommentOnLine(){var endOfLine=source_text.indexOf("\n",pos);if(endOfLine===-1){return false}var restOfLine=source_text.substring(pos,endOfLine);return restOfLine.indexOf("//")!==-1}var indentString=source_text.match(/^[\r\n]*[\t ]*/)[0];var singleIndent=new Array(indentSize+1).join(indentCharacter);var indentLevel=0;var nestedLevel=0;function indent(){indentLevel++;indentString+=singleIndent}function outdent(){indentLevel--;indentString=indentString.slice(0,-indentSize)}var print={};print["{"]=function(ch){print.singleSpace();output.push(ch);print.newLine()};print["}"]=function(ch){print.newLine();output.push(ch);print.newLine()};print._lastCharWhitespace=function(){return whiteRe.test(output[output.length-1])};print.newLine=function(keepWhitespace){if(!keepWhitespace){while(print._lastCharWhitespace()){output.pop()}}if(output.length){output.push("\n")}if(indentString){output.push(indentString)}};print.singleSpace=function(){if(output.length&&!print._lastCharWhitespace()){output.push(" ")}};var output=[];if(indentString){output.push(indentString)}var insideRule=false;var enteringConditionalGroup=false;while(true){var isAfterSpace=skipWhitespace();if(!ch){break}else if(ch==="/"&&peek()==="*"){print.newLine();output.push(eatComment(),"\n",indentString);var header=lookBack("");if(header){print.newLine()}}else if(ch==="/"&&peek()==="/"){output.push(eatComment(true),indentString)}else if(ch==="@"){var atRule=eatString(" ").replace(/ $/,"");output.push(atRule,ch);if(atRule in css_beautify.NESTED_AT_RULE){nestedLevel+=1;if(atRule in css_beautify.CONDITIONAL_GROUP_RULE){enteringConditionalGroup=true}}}else if(ch==="{"){eatWhitespace();if(peek()==="}"){next();output.push(" {}")}else{indent();print["{"](ch);if(enteringConditionalGroup){enteringConditionalGroup=false;insideRule=indentLevel>nestedLevel}else{insideRule=indentLevel>=nestedLevel}}}else if(ch==="}"){outdent();print["}"](ch);insideRule=false;if(nestedLevel){nestedLevel--}}else if(ch===":"){eatWhitespace();if(insideRule||enteringConditionalGroup){output.push(ch," ")}else{if(peek()===":"){next();output.push("::")}else{output.push(ch)}}}else if(ch==='"'||ch==="'"){output.push(eatString(ch))}else if(ch===";"){if(isCommentOnLine()){var beforeComment=eatString("/");var comment=eatComment(true);output.push(beforeComment,comment.substring(1,comment.length-1),"\n",indentString)}else{output.push(ch,"\n",indentString)}}else if(ch==="("){if(lookBack("url")){output.push(ch);eatWhitespace();if(next()){if(ch!==")"&&ch!=='"'&&ch!=="'"){output.push(eatString(")"))}else{pos--}}}else{if(isAfterSpace){print.singleSpace()}output.push(ch);eatWhitespace()}}else if(ch===")"){output.push(ch)}else if(ch===","){eatWhitespace();output.push(ch);if(!insideRule&&selectorSeparatorNewline){print.newLine()}else{print.singleSpace()}}else if(ch==="]"){output.push(ch)}else if(ch==="["||ch==="="){eatWhitespace();output.push(ch)}else{if(isAfterSpace){print.singleSpace()}output.push(ch)}}var sweetCode=output.join("").replace(/[\n ]+$/,"");var should=endWithNewline;var actually=/\n$/.test(sweetCode);if(should&&!actually){sweetCode+="\n"}else if(!should&&actually){sweetCode=sweetCode.slice(0,-1)}return sweetCode}css_beautify.NESTED_AT_RULE={"@page":true,"@font-face":true,"@keyframes":true,"@media":true,"@supports":true,"@document":true};css_beautify.CONDITIONAL_GROUP_RULE={"@media":true,"@supports":true,"@document":true};if(typeof define==="function"&&define.amd){define([],function(){return{css_beautify:css_beautify}})}else if(typeof exports!=="undefined"){exports.css_beautify=css_beautify}else if(typeof window!=="undefined"){window.css_beautify=css_beautify}else if(typeof global!=="undefined"){global.css_beautify=css_beautify}})()}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],5:[function(_dereq_,module,exports){(function(global){(function(){function trim(s){return s.replace(/^\s+|\s+$/g,"")}function ltrim(s){return s.replace(/^\s+/g,"")}function style_html(html_source,options,js_beautify,css_beautify){var multi_parser,indent_inner_html,indent_size,indent_character,wrap_line_length,brace_style,unformatted,preserve_newlines,max_preserve_newlines,indent_handlebars;options=options||{};if((options.wrap_line_length===undefined||parseInt(options.wrap_line_length,10)===0)&&(options.max_char!==undefined&&parseInt(options.max_char,10)!==0)){options.wrap_line_length=options.max_char}indent_inner_html=options.indent_inner_html===undefined?false:options.indent_inner_html;indent_size=options.indent_size===undefined?4:parseInt(options.indent_size,10);indent_character=options.indent_char===undefined?" ":options.indent_char;brace_style=options.brace_style===undefined?"collapse":options.brace_style;wrap_line_length=parseInt(options.wrap_line_length,10)===0?32786:parseInt(options.wrap_line_length||250,10);unformatted=options.unformatted||["a","span","bdo","em","strong","dfn","code","samp","kbd","var","cite","abbr","acronym","q","sub","sup","tt","i","b","big","small","u","s","strike","font","ins","del","pre","address","dt","h1","h2","h3","h4","h5","h6"];preserve_newlines=options.preserve_newlines===undefined?true:options.preserve_newlines;max_preserve_newlines=preserve_newlines?isNaN(parseInt(options.max_preserve_newlines,10))?32786:parseInt(options.max_preserve_newlines,10):0;indent_handlebars=options.indent_handlebars===undefined?false:options.indent_handlebars;function Parser(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.tag_type="";this.token_text=this.last_token=this.last_text=this.token_type="";this.newlines=0;this.indent_content=indent_inner_html;this.Utils={whitespace:"\n\r	 ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed,?php,?,?=".split(","),extra_liners:"head,body,/html".split(","),in_array:function(what,arr){for(var i=0;i<arr.length;i++){if(what===arr[i]){return true}}return false}};this.traverse_whitespace=function(){var input_char="";input_char=this.input.charAt(this.pos);if(this.Utils.in_array(input_char,this.Utils.whitespace)){this.newlines=0;while(this.Utils.in_array(input_char,this.Utils.whitespace)){if(preserve_newlines&&input_char==="\n"&&this.newlines<=max_preserve_newlines){this.newlines+=1}this.pos++;input_char=this.input.charAt(this.pos)}return true}return false};this.get_content=function(){var input_char="",content=[],space=false;while(this.input.charAt(this.pos)!=="<"){if(this.pos>=this.input.length){return content.length?content.join(""):["","TK_EOF"]}if(this.traverse_whitespace()){if(content.length){space=true}continue}if(indent_handlebars){var peek3=this.input.substr(this.pos,3);if(peek3==="{{#"||peek3==="{{/"){break}else if(this.input.substr(this.pos,2)==="{{"){if(this.get_tag(true)==="{{else}}"){break}}}input_char=this.input.charAt(this.pos);this.pos++;if(space){if(this.line_char_count>=this.wrap_line_length){this.print_newline(false,content);this.print_indentation(content)}else{this.line_char_count++;content.push(" ")}space=false}this.line_char_count++;content.push(input_char)}return content.length?content.join(""):""};this.get_contents_to=function(name){if(this.pos===this.input.length){return["","TK_EOF"]}var input_char="";var content="";var reg_match=new RegExp("</"+name+"\\s*>","igm");reg_match.lastIndex=this.pos;var reg_array=reg_match.exec(this.input);var end_script=reg_array?reg_array.index:this.input.length;if(this.pos<end_script){content=this.input.substring(this.pos,end_script);this.pos=end_script}return content};this.record_tag=function(tag){if(this.tags[tag+"count"]){this.tags[tag+"count"]++;this.tags[tag+this.tags[tag+"count"]]=this.indent_level}else{this.tags[tag+"count"]=1;this.tags[tag+this.tags[tag+"count"]]=this.indent_level}this.tags[tag+this.tags[tag+"count"]+"parent"]=this.tags.parent;this.tags.parent=tag+this.tags[tag+"count"]};this.retrieve_tag=function(tag){if(this.tags[tag+"count"]){var temp_parent=this.tags.parent;while(temp_parent){if(tag+this.tags[tag+"count"]===temp_parent){break}temp_parent=this.tags[temp_parent+"parent"]}if(temp_parent){this.indent_level=this.tags[tag+this.tags[tag+"count"]];this.tags.parent=this.tags[temp_parent+"parent"]}delete this.tags[tag+this.tags[tag+"count"]+"parent"];delete this.tags[tag+this.tags[tag+"count"]];if(this.tags[tag+"count"]===1){delete this.tags[tag+"count"]}else{this.tags[tag+"count"]--}}};this.indent_to_tag=function(tag){if(!this.tags[tag+"count"]){return}var temp_parent=this.tags.parent;while(temp_parent){if(tag+this.tags[tag+"count"]===temp_parent){break}temp_parent=this.tags[temp_parent+"parent"]}if(temp_parent){this.indent_level=this.tags[tag+this.tags[tag+"count"]]}};this.get_tag=function(peek){var input_char="",content=[],comment="",space=false,tag_start,tag_end,tag_start_char,orig_pos=this.pos,orig_line_char_count=this.line_char_count;peek=peek!==undefined?peek:false;do{if(this.pos>=this.input.length){if(peek){this.pos=orig_pos;this.line_char_count=orig_line_char_count}return content.length?content.join(""):["","TK_EOF"]}input_char=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(input_char,this.Utils.whitespace)){space=true;continue}if(input_char==="'"||input_char==='"'){input_char+=this.get_unformatted(input_char);space=true}if(input_char==="="){space=false}if(content.length&&content[content.length-1]!=="="&&input_char!==">"&&space){if(this.line_char_count>=this.wrap_line_length){this.print_newline(false,content);this.print_indentation(content)}else{content.push(" ");this.line_char_count++}space=false}if(indent_handlebars&&tag_start_char==="<"){if(input_char+this.input.charAt(this.pos)==="{{"){input_char+=this.get_unformatted("}}");if(content.length&&content[content.length-1]!==" "&&content[content.length-1]!=="<"){input_char=" "+input_char}space=true}}if(input_char==="<"&&!tag_start_char){tag_start=this.pos-1;tag_start_char="<"}if(indent_handlebars&&!tag_start_char){if(content.length>=2&&content[content.length-1]==="{"&&content[content.length-2]=="{"){if(input_char==="#"||input_char==="/"){tag_start=this.pos-3}else{tag_start=this.pos-2}tag_start_char="{"}}this.line_char_count++;content.push(input_char);if(content[1]&&content[1]==="!"){content=[this.get_comment(tag_start)];break}if(indent_handlebars&&tag_start_char==="{"&&content.length>2&&content[content.length-2]==="}"&&content[content.length-1]==="}"){break}}while(input_char!==">");var tag_complete=content.join("");var tag_index;var tag_offset;if(tag_complete.indexOf(" ")!==-1){tag_index=tag_complete.indexOf(" ")}else if(tag_complete[0]==="{"){tag_index=tag_complete.indexOf("}")}else{tag_index=tag_complete.indexOf(">")}if(tag_complete[0]==="<"||!indent_handlebars){tag_offset=1}else{tag_offset=tag_complete[2]==="#"?3:2}var tag_check=tag_complete.substring(tag_offset,tag_index).toLowerCase();if(tag_complete.charAt(tag_complete.length-2)==="/"||this.Utils.in_array(tag_check,this.Utils.single_token)){if(!peek){this.tag_type="SINGLE"}}else if(indent_handlebars&&tag_complete[0]==="{"&&tag_check==="else"){if(!peek){this.indent_to_tag("if");this.tag_type="HANDLEBARS_ELSE";this.indent_content=true;this.traverse_whitespace()}}else if(tag_check==="script"){if(!peek){this.record_tag(tag_check);this.tag_type="SCRIPT"}}else if(tag_check==="style"){if(!peek){this.record_tag(tag_check);this.tag_type="STYLE"}}else if(this.is_unformatted(tag_check,unformatted)){comment=this.get_unformatted("</"+tag_check+">",tag_complete);content.push(comment);if(tag_start>0&&this.Utils.in_array(this.input.charAt(tag_start-1),this.Utils.whitespace)){content.splice(0,0,this.input.charAt(tag_start-1))}tag_end=this.pos-1;if(this.Utils.in_array(this.input.charAt(tag_end+1),this.Utils.whitespace)){content.push(this.input.charAt(tag_end+1))}this.tag_type="SINGLE"}else if(tag_check.charAt(0)==="!"){if(!peek){this.tag_type="SINGLE";this.traverse_whitespace()}}else if(!peek){if(tag_check.charAt(0)==="/"){this.retrieve_tag(tag_check.substring(1));this.tag_type="END";this.traverse_whitespace()}else{this.record_tag(tag_check);if(tag_check.toLowerCase()!=="html"){this.indent_content=true}this.tag_type="START";this.traverse_whitespace()}if(this.Utils.in_array(tag_check,this.Utils.extra_liners)){this.print_newline(false,this.output);if(this.output.length&&this.output[this.output.length-2]!=="\n"){this.print_newline(true,this.output)}}}if(peek){this.pos=orig_pos;this.line_char_count=orig_line_char_count}return content.join("")};this.get_comment=function(start_pos){var comment="",delimiter=">",matched=false;this.pos=start_pos;input_char=this.input.charAt(this.pos);this.pos++;while(this.pos<=this.input.length){comment+=input_char;if(comment[comment.length-1]===delimiter[delimiter.length-1]&&comment.indexOf(delimiter)!==-1){break}if(!matched&&comment.length<10){if(comment.indexOf("<![if")===0){delimiter="<![endif]>";matched=true}else if(comment.indexOf("<![cdata[")===0){delimiter="]]>";matched=true}else if(comment.indexOf("<![")===0){delimiter="]>";matched=true}else if(comment.indexOf("<!--")===0){delimiter="-->";matched=true}}input_char=this.input.charAt(this.pos);this.pos++}return comment};this.get_unformatted=function(delimiter,orig_tag){if(orig_tag&&orig_tag.toLowerCase().indexOf(delimiter)!==-1){return""}var input_char="";var content="";var min_index=0;var space=true;do{if(this.pos>=this.input.length){return content}input_char=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(input_char,this.Utils.whitespace)){if(!space){this.line_char_count--;continue}if(input_char==="\n"||input_char==="\r"){content+="\n";this.line_char_count=0;continue}}content+=input_char;this.line_char_count++;space=true;if(indent_handlebars&&input_char==="{"&&content.length&&content[content.length-2]==="{"){content+=this.get_unformatted("}}");min_index=content.length}}while(content.toLowerCase().indexOf(delimiter,min_index)===-1);return content};this.get_token=function(){var token;if(this.last_token==="TK_TAG_SCRIPT"||this.last_token==="TK_TAG_STYLE"){var type=this.last_token.substr(7);token=this.get_contents_to(type);if(typeof token!=="string"){return token}return[token,"TK_"+type]}if(this.current_mode==="CONTENT"){token=this.get_content();if(typeof token!=="string"){return token}else{return[token,"TK_CONTENT"]}}if(this.current_mode==="TAG"){token=this.get_tag();if(typeof token!=="string"){return token}else{var tag_name_type="TK_TAG_"+this.tag_type;return[token,tag_name_type]}}};this.get_full_indent=function(level){level=this.indent_level+level||0;if(level<1){return""}return Array(level+1).join(this.indent_string)};this.is_unformatted=function(tag_check,unformatted){if(!this.Utils.in_array(tag_check,unformatted)){return false}if(tag_check.toLowerCase()!=="a"||!this.Utils.in_array("a",unformatted)){return true}var next_tag=this.get_tag(true);var tag=(next_tag||"").match(/^\s*<\s*\/?([a-z]*)\s*[^>]*>\s*$/);if(!tag||this.Utils.in_array(tag,unformatted)){return true}else{return false}};this.printer=function(js_source,indent_character,indent_size,wrap_line_length,brace_style){this.input=js_source||"";this.output=[];this.indent_character=indent_character;this.indent_string="";this.indent_size=indent_size;this.brace_style=brace_style;this.indent_level=0;this.wrap_line_length=wrap_line_length;this.line_char_count=0;for(var i=0;i<this.indent_size;i++){this.indent_string+=this.indent_character}this.print_newline=function(force,arr){this.line_char_count=0;if(!arr||!arr.length){return}if(force||arr[arr.length-1]!=="\n"){arr.push("\n")}};this.print_indentation=function(arr){for(var i=0;i<this.indent_level;i++){arr.push(this.indent_string);this.line_char_count+=this.indent_string.length}};this.print_token=function(text){if(text||text!==""){if(this.output.length&&this.output[this.output.length-1]==="\n"){this.print_indentation(this.output);text=ltrim(text)}}this.print_token_raw(text)};this.print_token_raw=function(text){if(text&&text!==""){if(text.length>1&&text[text.length-1]==="\n"){this.output.push(text.slice(0,-1));this.print_newline(false,this.output)}else{this.output.push(text)}}for(var n=0;n<this.newlines;n++){this.print_newline(n>0,this.output)}this.newlines=0};this.indent=function(){this.indent_level++};this.unindent=function(){if(this.indent_level>0){this.indent_level--}}};return this}multi_parser=new Parser;multi_parser.printer(html_source,indent_character,indent_size,wrap_line_length,brace_style);while(true){var t=multi_parser.get_token();multi_parser.token_text=t[0];multi_parser.token_type=t[1];if(multi_parser.token_type==="TK_EOF"){break}switch(multi_parser.token_type){case"TK_TAG_START":multi_parser.print_newline(false,multi_parser.output);multi_parser.print_token(multi_parser.token_text);if(multi_parser.indent_content){multi_parser.indent();multi_parser.indent_content=false}multi_parser.current_mode="CONTENT";break;case"TK_TAG_STYLE":case"TK_TAG_SCRIPT":multi_parser.print_newline(false,multi_parser.output);multi_parser.print_token(multi_parser.token_text);multi_parser.current_mode="CONTENT";break;case"TK_TAG_END":if(multi_parser.last_token==="TK_CONTENT"&&multi_parser.last_text===""){var tag_name=multi_parser.token_text.match(/\w+/)[0];var tag_extracted_from_last_output=null;if(multi_parser.output.length){tag_extracted_from_last_output=multi_parser.output[multi_parser.output.length-1].match(/(?:<|{{#)\s*(\w+)/)}if(tag_extracted_from_last_output===null||tag_extracted_from_last_output[1]!==tag_name){multi_parser.print_newline(false,multi_parser.output)}}multi_parser.print_token(multi_parser.token_text);multi_parser.current_mode="CONTENT";break;case"TK_TAG_SINGLE":var tag_check=multi_parser.token_text.match(/^\s*<([a-z]+)/i);if(!tag_check||!multi_parser.Utils.in_array(tag_check[1],unformatted)){multi_parser.print_newline(false,multi_parser.output)}multi_parser.print_token(multi_parser.token_text);multi_parser.current_mode="CONTENT";break;case"TK_TAG_HANDLEBARS_ELSE":multi_parser.print_token(multi_parser.token_text);if(multi_parser.indent_content){multi_parser.indent();multi_parser.indent_content=false}multi_parser.current_mode="CONTENT";break;case"TK_CONTENT":multi_parser.print_token(multi_parser.token_text);multi_parser.current_mode="TAG";break;case"TK_STYLE":case"TK_SCRIPT":if(multi_parser.token_text!==""){multi_parser.print_newline(false,multi_parser.output);var text=multi_parser.token_text,_beautifier,script_indent_level=1;if(multi_parser.token_type==="TK_SCRIPT"){_beautifier=typeof js_beautify==="function"&&js_beautify}else if(multi_parser.token_type==="TK_STYLE"){_beautifier=typeof css_beautify==="function"&&css_beautify}if(options.indent_scripts==="keep"){script_indent_level=0}else if(options.indent_scripts==="separate"){script_indent_level=-multi_parser.indent_level}var indentation=multi_parser.get_full_indent(script_indent_level);if(_beautifier){text=_beautifier(text.replace(/^\s*/,indentation),options)}else{var white=text.match(/^\s*/)[0];var _level=white.match(/[^\n\r]*$/)[0].split(multi_parser.indent_string).length-1;var reindent=multi_parser.get_full_indent(script_indent_level-_level);text=text.replace(/^\s*/,indentation).replace(/\r\n|\r|\n/g,"\n"+reindent).replace(/\s+$/,"")}if(text){multi_parser.print_token_raw(indentation+trim(text));multi_parser.print_newline(false,multi_parser.output)}}multi_parser.current_mode="TAG";break}multi_parser.last_token=multi_parser.token_type;multi_parser.last_text=multi_parser.token_text}return multi_parser.output.join("")}if(typeof define==="function"&&define.amd){define(["require","./beautify","./beautify-css"],function(requireamd){var js_beautify=requireamd("./beautify");var css_beautify=requireamd("./beautify-css");return{html_beautify:function(html_source,options){return style_html(html_source,options,js_beautify.js_beautify,css_beautify.css_beautify)}}})}else if(typeof exports!=="undefined"){var js_beautify=_dereq_("./beautify.js");var css_beautify=_dereq_("./beautify-css.js");exports.html_beautify=function(html_source,options){return style_html(html_source,options,js_beautify.js_beautify,css_beautify.css_beautify)}}else if(typeof window!=="undefined"){window.html_beautify=function(html_source,options){return style_html(html_source,options,window.js_beautify,window.css_beautify)}}else if(typeof global!=="undefined"){global.html_beautify=function(html_source,options){return style_html(html_source,options,global.js_beautify,global.css_beautify)}}})()}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./beautify-css.js":4,"./beautify.js":6}],6:[function(_dereq_,module,exports){(function(global){(function(){var acorn={};(function(exports){var nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/;var nonASCIIidentifierStartChars="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ";var nonASCIIidentifierChars="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿";
var nonASCIIidentifierStart=new RegExp("["+nonASCIIidentifierStartChars+"]");var nonASCIIidentifier=new RegExp("["+nonASCIIidentifierStartChars+nonASCIIidentifierChars+"]");var newline=/[\n\r\u2028\u2029]/;var lineBreak=/\r\n|[\n\r\u2028\u2029]/g;var isIdentifierStart=exports.isIdentifierStart=function(code){if(code<65)return code===36;if(code<91)return true;if(code<97)return code===95;if(code<123)return true;return code>=170&&nonASCIIidentifierStart.test(String.fromCharCode(code))};var isIdentifierChar=exports.isIdentifierChar=function(code){if(code<48)return code===36;if(code<58)return true;if(code<65)return false;if(code<91)return true;if(code<97)return code===95;if(code<123)return true;return code>=170&&nonASCIIidentifier.test(String.fromCharCode(code))}})(acorn);function js_beautify(js_source_text,options){"use strict";var beautifier=new Beautifier(js_source_text,options);return beautifier.beautify()}function Beautifier(js_source_text,options){"use strict";var input,output_lines;var token_text,token_type,last_type,last_last_text,indent_string;var flags,previous_flags,flag_store;var whitespace,wordchar,punct,parser_pos,line_starters,reserved_words,digits;var prefix;var input_wanted_newline;var output_wrapped,output_space_before_token;var input_length,n_newlines,whitespace_before_token;var handlers,MODE,opt;var preindent_string="";whitespace="\n\r	 ".split("");wordchar="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");digits="0123456789".split("");punct="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! , : ? ^ ^= |= :: =>";punct+=" <%= <% %> <?= <? ?>";punct=punct.split(" ");line_starters="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function".split(",");reserved_words=line_starters.concat(["do","in","else","get","set","new","catch","finally","typeof"]);MODE={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};handlers={TK_START_EXPR:handle_start_expr,TK_END_EXPR:handle_end_expr,TK_START_BLOCK:handle_start_block,TK_END_BLOCK:handle_end_block,TK_WORD:handle_word,TK_RESERVED:handle_word,TK_SEMICOLON:handle_semicolon,TK_STRING:handle_string,TK_EQUALS:handle_equals,TK_OPERATOR:handle_operator,TK_COMMA:handle_comma,TK_BLOCK_COMMENT:handle_block_comment,TK_INLINE_COMMENT:handle_inline_comment,TK_COMMENT:handle_comment,TK_DOT:handle_dot,TK_UNKNOWN:handle_unknown};function create_flags(flags_base,mode){var next_indent_level=0;if(flags_base){next_indent_level=flags_base.indentation_level;if(!just_added_newline()&&flags_base.line_indent_level>next_indent_level){next_indent_level=flags_base.line_indent_level}}var next_flags={mode:mode,parent:flags_base,last_text:flags_base?flags_base.last_text:"",last_word:flags_base?flags_base.last_word:"",declaration_statement:false,declaration_assignment:false,in_html_comment:false,multiline_frame:false,if_block:false,else_block:false,do_block:false,do_while:false,in_case_statement:false,in_case:false,case_body:false,indentation_level:next_indent_level,line_indent_level:flags_base?flags_base.line_indent_level:next_indent_level,start_line_index:output_lines.length,had_comment:false,ternary_depth:0};return next_flags}function create_output_line(){return{text:[]}}options=options?options:{};opt={};if(options.space_after_anon_function!==undefined&&options.jslint_happy===undefined){options.jslint_happy=options.space_after_anon_function}if(options.braces_on_own_line!==undefined){opt.brace_style=options.braces_on_own_line?"expand":"collapse"}opt.brace_style=options.brace_style?options.brace_style:opt.brace_style?opt.brace_style:"collapse";if(opt.brace_style==="expand-strict"){opt.brace_style="expand"}opt.indent_size=options.indent_size?parseInt(options.indent_size,10):4;opt.indent_char=options.indent_char?options.indent_char:" ";opt.preserve_newlines=options.preserve_newlines===undefined?true:options.preserve_newlines;opt.break_chained_methods=options.break_chained_methods===undefined?false:options.break_chained_methods;opt.max_preserve_newlines=options.max_preserve_newlines===undefined?0:parseInt(options.max_preserve_newlines,10);opt.space_in_paren=options.space_in_paren===undefined?false:options.space_in_paren;opt.space_in_empty_paren=options.space_in_empty_paren===undefined?false:options.space_in_empty_paren;opt.jslint_happy=options.jslint_happy===undefined?false:options.jslint_happy;opt.keep_array_indentation=options.keep_array_indentation===undefined?false:options.keep_array_indentation;opt.space_before_conditional=options.space_before_conditional===undefined?true:options.space_before_conditional;opt.unescape_strings=options.unescape_strings===undefined?false:options.unescape_strings;opt.wrap_line_length=options.wrap_line_length===undefined?0:parseInt(options.wrap_line_length,10);opt.e4x=options.e4x===undefined?false:options.e4x;if(options.indent_with_tabs){opt.indent_char="	";opt.indent_size=1}indent_string="";while(opt.indent_size>0){indent_string+=opt.indent_char;opt.indent_size-=1}while(js_source_text&&(js_source_text.charAt(0)===" "||js_source_text.charAt(0)==="	")){preindent_string+=js_source_text.charAt(0);js_source_text=js_source_text.substring(1)}input=js_source_text;input_length=js_source_text.length;last_type="TK_START_BLOCK";last_last_text="";output_lines=[create_output_line()];output_wrapped=false;output_space_before_token=false;whitespace_before_token=[];flag_store=[];set_mode(MODE.BlockStatement);parser_pos=0;this.beautify=function(){var t,i,keep_whitespace,sweet_code;while(true){t=get_next_token();token_text=t[0];token_type=t[1];if(token_type==="TK_EOF"){while(flags.mode===MODE.Statement){restore_mode()}break}keep_whitespace=opt.keep_array_indentation&&is_array(flags.mode);input_wanted_newline=n_newlines>0;if(keep_whitespace){for(i=0;i<n_newlines;i+=1){print_newline(i>0)}}else{if(opt.max_preserve_newlines&&n_newlines>opt.max_preserve_newlines){n_newlines=opt.max_preserve_newlines}if(opt.preserve_newlines){if(n_newlines>1){print_newline();for(i=1;i<n_newlines;i+=1){print_newline(true)}}}}handlers[token_type]();if(token_type!=="TK_INLINE_COMMENT"&&token_type!=="TK_COMMENT"&&token_type!=="TK_BLOCK_COMMENT"&&token_type!=="TK_UNKNOWN"){last_last_text=flags.last_text;last_type=token_type;flags.last_text=token_text}flags.had_comment=token_type==="TK_INLINE_COMMENT"||token_type==="TK_COMMENT"||token_type==="TK_BLOCK_COMMENT"}sweet_code=output_lines[0].text.join("");for(var line_index=1;line_index<output_lines.length;line_index++){sweet_code+="\n"+output_lines[line_index].text.join("")}sweet_code=sweet_code.replace(/[\r\n ]+$/,"");return sweet_code};function trim_output(eat_newlines){eat_newlines=eat_newlines===undefined?false:eat_newlines;if(output_lines.length){trim_output_line(output_lines[output_lines.length-1],eat_newlines);while(eat_newlines&&output_lines.length>1&&output_lines[output_lines.length-1].text.length===0){output_lines.pop();trim_output_line(output_lines[output_lines.length-1],eat_newlines)}}}function trim_output_line(line){while(line.text.length&&(line.text[line.text.length-1]===" "||line.text[line.text.length-1]===indent_string||line.text[line.text.length-1]===preindent_string)){line.text.pop()}}function trim(s){return s.replace(/^\s+|\s+$/g,"")}function split_newlines(s){s=s.replace(/\x0d/g,"");var out=[],idx=s.indexOf("\n");while(idx!==-1){out.push(s.substring(0,idx));s=s.substring(idx+1);idx=s.indexOf("\n")}if(s.length){out.push(s)}return out}function just_added_newline(){var line=output_lines[output_lines.length-1];return line.text.length===0}function just_added_blankline(){if(just_added_newline()){if(output_lines.length===1){return true}var line=output_lines[output_lines.length-2];return line.text.length===0}return false}function allow_wrap_or_preserved_newline(force_linewrap){force_linewrap=force_linewrap===undefined?false:force_linewrap;if(opt.wrap_line_length&&!force_linewrap){var line=output_lines[output_lines.length-1];var proposed_line_length=0;if(line.text.length>0){proposed_line_length=line.text.join("").length+token_text.length+(output_space_before_token?1:0);if(proposed_line_length>=opt.wrap_line_length){force_linewrap=true}}}if((opt.preserve_newlines&&input_wanted_newline||force_linewrap)&&!just_added_newline()){print_newline(false,true);if(!(is_array(flags.mode)||is_expression(flags.mode)||flags.mode===MODE.Statement)){output_wrapped=true}}}function print_newline(force_newline,preserve_statement_flags){output_wrapped=false;output_space_before_token=false;if(!preserve_statement_flags){if(flags.last_text!==";"&&flags.last_text!==","&&flags.last_text!=="="&&last_type!=="TK_OPERATOR"){while(flags.mode===MODE.Statement&&!flags.if_block&&!flags.do_block){restore_mode()}}}if(output_lines.length===1&&just_added_newline()){return}if(force_newline||!just_added_newline()){flags.multiline_frame=true;output_lines.push(create_output_line())}}function print_token_line_indentation(){if(just_added_newline()){var line=output_lines[output_lines.length-1];if(opt.keep_array_indentation&&is_array(flags.mode)&&input_wanted_newline){line.text.push("");for(var i=0;i<whitespace_before_token.length;i+=1){line.text.push(whitespace_before_token[i])}}else{if(preindent_string){line.text.push(preindent_string)}print_indent_string(flags.indentation_level+(output_wrapped?1:0))}}}function print_indent_string(level){if(output_lines.length>1){var line=output_lines[output_lines.length-1];flags.line_indent_level=level;for(var i=0;i<level;i+=1){line.text.push(indent_string)}}}function print_token_space_before(){var line=output_lines[output_lines.length-1];if(output_space_before_token&&line.text.length){var last_output=line.text[line.text.length-1];if(last_output!==" "&&last_output!==indent_string){line.text.push(" ")}}}function print_token(printable_token){printable_token=printable_token||token_text;print_token_line_indentation();output_wrapped=false;print_token_space_before();output_space_before_token=false;output_lines[output_lines.length-1].text.push(printable_token)}function indent(){flags.indentation_level+=1}function deindent(){if(flags.indentation_level>0&&(!flags.parent||flags.indentation_level>flags.parent.indentation_level))flags.indentation_level-=1}function remove_redundant_indentation(frame){if(frame.multiline_frame)return;var index=frame.start_line_index;var splice_index=0;var line;while(index<output_lines.length){line=output_lines[index];index++;if(line.text.length===0){continue}if(preindent_string&&line.text[0]===preindent_string){splice_index=1}else{splice_index=0}if(line.text[splice_index]===indent_string){line.text.splice(splice_index,1)}}}function set_mode(mode){if(flags){flag_store.push(flags);previous_flags=flags}else{previous_flags=create_flags(null,mode)}flags=create_flags(previous_flags,mode)}function is_array(mode){return mode===MODE.ArrayLiteral}function is_expression(mode){return in_array(mode,[MODE.Expression,MODE.ForInitializer,MODE.Conditional])}function restore_mode(){if(flag_store.length>0){previous_flags=flags;flags=flag_store.pop();if(previous_flags.mode===MODE.Statement){remove_redundant_indentation(previous_flags)}}}function start_of_object_property(){return flags.mode===MODE.ObjectLiteral&&flags.last_text===":"&&flags.ternary_depth===0}function start_of_statement(){if(last_type==="TK_RESERVED"&&in_array(flags.last_text,["var","let","const"])&&token_type==="TK_WORD"||last_type==="TK_RESERVED"&&flags.last_text==="do"||last_type==="TK_RESERVED"&&flags.last_text==="return"&&!input_wanted_newline||last_type==="TK_RESERVED"&&flags.last_text==="else"&&!(token_type==="TK_RESERVED"&&token_text==="if")||last_type==="TK_END_EXPR"&&(previous_flags.mode===MODE.ForInitializer||previous_flags.mode===MODE.Conditional)){set_mode(MODE.Statement);indent();if(last_type==="TK_RESERVED"&&in_array(flags.last_text,["var","let","const"])&&token_type==="TK_WORD"){flags.declaration_statement=true}allow_wrap_or_preserved_newline(token_type==="TK_RESERVED"&&in_array(token_text,["do","for","if","while"]));output_wrapped=false;return true}return false}function all_lines_start_with(lines,c){for(var i=0;i<lines.length;i++){var line=trim(lines[i]);if(line.charAt(0)!==c){return false}}return true}function is_special_word(word){return in_array(word,["case","return","do","if","throw","else"])}function in_array(what,arr){for(var i=0;i<arr.length;i+=1){if(arr[i]===what){return true}}return false}function unescape_string(s){var esc=false,out="",pos=0,s_hex="",escaped=0,c;while(esc||pos<s.length){c=s.charAt(pos);pos++;if(esc){esc=false;if(c==="x"){s_hex=s.substr(pos,2);pos+=2}else if(c==="u"){s_hex=s.substr(pos,4);pos+=4}else{out+="\\"+c;continue}if(!s_hex.match(/^[0123456789abcdefABCDEF]+$/)){return s}escaped=parseInt(s_hex,16);if(escaped>=0&&escaped<32){if(c==="x"){out+="\\x"+s_hex}else{out+="\\u"+s_hex}continue}else if(escaped===34||escaped===39||escaped===92){out+="\\"+String.fromCharCode(escaped)}else if(c==="x"&&escaped>126&&escaped<=255){return s}else{out+=String.fromCharCode(escaped)}}else if(c==="\\"){esc=true}else{out+=c}}return out}function is_next(find){var local_pos=parser_pos;var c=input.charAt(local_pos);while(in_array(c,whitespace)&&c!==find){local_pos++;if(local_pos>=input_length){return false}c=input.charAt(local_pos)}return c===find}function get_next_token(){var i,resulting_string;n_newlines=0;if(parser_pos>=input_length){return["","TK_EOF"]}input_wanted_newline=false;whitespace_before_token=[];var c=input.charAt(parser_pos);parser_pos+=1;while(in_array(c,whitespace)){if(c==="\n"){n_newlines+=1;whitespace_before_token=[]}else if(n_newlines){if(c===indent_string){whitespace_before_token.push(indent_string)}else if(c!=="\r"){whitespace_before_token.push(" ")}}if(parser_pos>=input_length){return["","TK_EOF"]}c=input.charAt(parser_pos);parser_pos+=1}if(acorn.isIdentifierChar(input.charCodeAt(parser_pos-1))){if(parser_pos<input_length){while(acorn.isIdentifierChar(input.charCodeAt(parser_pos))){c+=input.charAt(parser_pos);parser_pos+=1;if(parser_pos===input_length){break}}}if(parser_pos!==input_length&&c.match(/^[0-9]+[Ee]$/)&&(input.charAt(parser_pos)==="-"||input.charAt(parser_pos)==="+")){var sign=input.charAt(parser_pos);parser_pos+=1;var t=get_next_token();c+=sign+t[0];return[c,"TK_WORD"]}if(!(last_type==="TK_DOT"||last_type==="TK_RESERVED"&&in_array(flags.last_text,["set","get"]))&&in_array(c,reserved_words)){if(c==="in"){return[c,"TK_OPERATOR"]}return[c,"TK_RESERVED"]}return[c,"TK_WORD"]}if(c==="("||c==="["){return[c,"TK_START_EXPR"]}if(c===")"||c==="]"){return[c,"TK_END_EXPR"]}if(c==="{"){return[c,"TK_START_BLOCK"]}if(c==="}"){return[c,"TK_END_BLOCK"]}if(c===";"){return[c,"TK_SEMICOLON"]}if(c==="/"){var comment="";var inline_comment=true;if(input.charAt(parser_pos)==="*"){parser_pos+=1;if(parser_pos<input_length){while(parser_pos<input_length&&!(input.charAt(parser_pos)==="*"&&input.charAt(parser_pos+1)&&input.charAt(parser_pos+1)==="/")){c=input.charAt(parser_pos);comment+=c;if(c==="\n"||c==="\r"){inline_comment=false}parser_pos+=1;if(parser_pos>=input_length){break}}}parser_pos+=2;if(inline_comment&&n_newlines===0){return["/*"+comment+"*/","TK_INLINE_COMMENT"]}else{return["/*"+comment+"*/","TK_BLOCK_COMMENT"]}}if(input.charAt(parser_pos)==="/"){comment=c;while(input.charAt(parser_pos)!=="\r"&&input.charAt(parser_pos)!=="\n"){comment+=input.charAt(parser_pos);parser_pos+=1;if(parser_pos>=input_length){break}}return[comment,"TK_COMMENT"]}}if(c==="`"||c==="'"||c==='"'||(c==="/"||opt.e4x&&c==="<"&&input.slice(parser_pos-1).match(/^<([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*\/?\s*>/))&&(last_type==="TK_RESERVED"&&is_special_word(flags.last_text)||last_type==="TK_END_EXPR"&&in_array(previous_flags.mode,[MODE.Conditional,MODE.ForInitializer])||in_array(last_type,["TK_COMMENT","TK_START_EXPR","TK_START_BLOCK","TK_END_BLOCK","TK_OPERATOR","TK_EQUALS","TK_EOF","TK_SEMICOLON","TK_COMMA"]))){var sep=c,esc=false,has_char_escapes=false;resulting_string=c;if(parser_pos<input_length){if(sep==="/"){var in_char_class=false;while(esc||in_char_class||input.charAt(parser_pos)!==sep){resulting_string+=input.charAt(parser_pos);if(!esc){esc=input.charAt(parser_pos)==="\\";if(input.charAt(parser_pos)==="["){in_char_class=true}else if(input.charAt(parser_pos)==="]"){in_char_class=false}}else{esc=false}parser_pos+=1;if(parser_pos>=input_length){return[resulting_string,"TK_STRING"]}}}else if(opt.e4x&&sep==="<"){var xmlRegExp=/<(\/?)([-a-zA-Z:0-9_.]+|{[^{}]*}|!\[CDATA\[[\s\S]*?\]\])\s*([-a-zA-Z:0-9_.]+=('[^']*'|"[^"]*"|{[^{}]*})\s*)*(\/?)\s*>/g;var xmlStr=input.slice(parser_pos-1);var match=xmlRegExp.exec(xmlStr);if(match&&match.index===0){var rootTag=match[2];var depth=0;while(match){var isEndTag=!!match[1];var tagName=match[2];var isSingletonTag=!!match[match.length-1]||tagName.slice(0,8)==="![CDATA[";if(tagName===rootTag&&!isSingletonTag){if(isEndTag){--depth}else{++depth}}if(depth<=0){break}match=xmlRegExp.exec(xmlStr)}var xmlLength=match?match.index+match[0].length:xmlStr.length;parser_pos+=xmlLength-1;return[xmlStr.slice(0,xmlLength),"TK_STRING"]}}else{while(esc||input.charAt(parser_pos)!==sep){resulting_string+=input.charAt(parser_pos);if(esc){if(input.charAt(parser_pos)==="x"||input.charAt(parser_pos)==="u"){has_char_escapes=true}esc=false}else{esc=input.charAt(parser_pos)==="\\"}parser_pos+=1;if(parser_pos>=input_length){return[resulting_string,"TK_STRING"]}}}}parser_pos+=1;resulting_string+=sep;if(has_char_escapes&&opt.unescape_strings){resulting_string=unescape_string(resulting_string)}if(sep==="/"){while(parser_pos<input_length&&in_array(input.charAt(parser_pos),wordchar)){resulting_string+=input.charAt(parser_pos);parser_pos+=1}}return[resulting_string,"TK_STRING"]}if(c==="#"){if(output_lines.length===1&&output_lines[0].text.length===0&&input.charAt(parser_pos)==="!"){resulting_string=c;while(parser_pos<input_length&&c!=="\n"){c=input.charAt(parser_pos);resulting_string+=c;parser_pos+=1}return[trim(resulting_string)+"\n","TK_UNKNOWN"]}var sharp="#";if(parser_pos<input_length&&in_array(input.charAt(parser_pos),digits)){do{c=input.charAt(parser_pos);sharp+=c;parser_pos+=1}while(parser_pos<input_length&&c!=="#"&&c!=="=");if(c==="#"){}else if(input.charAt(parser_pos)==="["&&input.charAt(parser_pos+1)==="]"){sharp+="[]";parser_pos+=2}else if(input.charAt(parser_pos)==="{"&&input.charAt(parser_pos+1)==="}"){sharp+="{}";parser_pos+=2}return[sharp,"TK_WORD"]}}if(c==="<"&&input.substring(parser_pos-1,parser_pos+3)==="<!--"){parser_pos+=3;c="<!--";while(input.charAt(parser_pos)!=="\n"&&parser_pos<input_length){c+=input.charAt(parser_pos);parser_pos++}flags.in_html_comment=true;return[c,"TK_COMMENT"]}if(c==="-"&&flags.in_html_comment&&input.substring(parser_pos-1,parser_pos+2)==="-->"){flags.in_html_comment=false;parser_pos+=2;return["-->","TK_COMMENT"]}if(c==="."){return[c,"TK_DOT"]}if(in_array(c,punct)){while(parser_pos<input_length&&in_array(c+input.charAt(parser_pos),punct)){c+=input.charAt(parser_pos);parser_pos+=1;if(parser_pos>=input_length){break}}if(c===","){return[c,"TK_COMMA"]}else if(c==="="){return[c,"TK_EQUALS"]}else{return[c,"TK_OPERATOR"]}}return[c,"TK_UNKNOWN"]}function handle_start_expr(){if(start_of_statement()){}var next_mode=MODE.Expression;if(token_text==="["){if(last_type==="TK_WORD"||flags.last_text===")"){if(last_type==="TK_RESERVED"&&in_array(flags.last_text,line_starters)){output_space_before_token=true}set_mode(next_mode);print_token();indent();if(opt.space_in_paren){output_space_before_token=true}return}next_mode=MODE.ArrayLiteral;if(is_array(flags.mode)){if(flags.last_text==="["||flags.last_text===","&&(last_last_text==="]"||last_last_text==="}")){if(!opt.keep_array_indentation){print_newline()}}}}else{if(last_type==="TK_RESERVED"&&flags.last_text==="for"){next_mode=MODE.ForInitializer}else if(last_type==="TK_RESERVED"&&in_array(flags.last_text,["if","while"])){next_mode=MODE.Conditional}else{}}if(flags.last_text===";"||last_type==="TK_START_BLOCK"){print_newline()}else if(last_type==="TK_END_EXPR"||last_type==="TK_START_EXPR"||last_type==="TK_END_BLOCK"||flags.last_text==="."){allow_wrap_or_preserved_newline(input_wanted_newline);output_wrapped=false}else if(!(last_type==="TK_RESERVED"&&token_text==="(")&&last_type!=="TK_WORD"&&last_type!=="TK_OPERATOR"){output_space_before_token=true}else if(last_type==="TK_RESERVED"&&(flags.last_word==="function"||flags.last_word==="typeof")){if(opt.jslint_happy){output_space_before_token=true}}else if(last_type==="TK_RESERVED"&&(in_array(flags.last_text,line_starters)||flags.last_text==="catch")){if(opt.space_before_conditional){output_space_before_token=true}}if(token_text==="("){if(last_type==="TK_EQUALS"||last_type==="TK_OPERATOR"){if(!start_of_object_property()){allow_wrap_or_preserved_newline()}}}set_mode(next_mode);print_token();if(opt.space_in_paren){output_space_before_token=true}indent()}function handle_end_expr(){while(flags.mode===MODE.Statement){restore_mode()}if(flags.multiline_frame){allow_wrap_or_preserved_newline(token_text==="]"&&is_array(flags.mode)&&!opt.keep_array_indentation);output_wrapped=false}if(opt.space_in_paren){if(last_type==="TK_START_EXPR"&&!opt.space_in_empty_paren){trim_output();output_space_before_token=false}else{output_space_before_token=true}}if(token_text==="]"&&opt.keep_array_indentation){print_token();restore_mode()}else{restore_mode();print_token()}remove_redundant_indentation(previous_flags);if(flags.do_while&&previous_flags.mode===MODE.Conditional){previous_flags.mode=MODE.Expression;flags.do_block=false;flags.do_while=false}}function handle_start_block(){set_mode(MODE.BlockStatement);var empty_braces=is_next("}");var empty_anonymous_function=empty_braces&&flags.last_word==="function"&&last_type==="TK_END_EXPR";if(opt.brace_style==="expand"){if(last_type!=="TK_OPERATOR"&&(empty_anonymous_function||last_type==="TK_EQUALS"||last_type==="TK_RESERVED"&&is_special_word(flags.last_text)&&flags.last_text!=="else")){output_space_before_token=true}else{print_newline(false,true)}}else{if(last_type!=="TK_OPERATOR"&&last_type!=="TK_START_EXPR"){if(last_type==="TK_START_BLOCK"){print_newline()}else{output_space_before_token=true}}else{if(is_array(previous_flags.mode)&&flags.last_text===","){if(last_last_text==="}"){output_space_before_token=true}else{print_newline()}}}}print_token();indent()}function handle_end_block(){while(flags.mode===MODE.Statement){restore_mode()}var empty_braces=last_type==="TK_START_BLOCK";if(opt.brace_style==="expand"){if(!empty_braces){print_newline()}}else{if(!empty_braces){if(is_array(flags.mode)&&opt.keep_array_indentation){opt.keep_array_indentation=false;print_newline();opt.keep_array_indentation=true}else{print_newline()}}}restore_mode();print_token()}function handle_word(){if(start_of_statement()){}else if(input_wanted_newline&&!is_expression(flags.mode)&&(last_type!=="TK_OPERATOR"||(flags.last_text==="--"||flags.last_text==="++"))&&last_type!=="TK_EQUALS"&&(opt.preserve_newlines||!(last_type==="TK_RESERVED"&&in_array(flags.last_text,["var","let","const","set","get"])))){print_newline()}if(flags.do_block&&!flags.do_while){if(token_type==="TK_RESERVED"&&token_text==="while"){output_space_before_token=true;print_token();output_space_before_token=true;flags.do_while=true;return}else{print_newline();flags.do_block=false}}if(flags.if_block){if(!flags.else_block&&(token_type==="TK_RESERVED"&&token_text==="else")){flags.else_block=true}else{while(flags.mode===MODE.Statement){restore_mode()}flags.if_block=false;flags.else_block=false}}if(token_type==="TK_RESERVED"&&(token_text==="case"||token_text==="default"&&flags.in_case_statement)){print_newline();if(flags.case_body||opt.jslint_happy){deindent();flags.case_body=false}print_token();flags.in_case=true;flags.in_case_statement=true;return}if(token_type==="TK_RESERVED"&&token_text==="function"){if(in_array(flags.last_text,["}",";"])||just_added_newline()&&!in_array(flags.last_text,["{",":","=",","])){if(!just_added_blankline()&&!flags.had_comment){print_newline();print_newline(true)}}if(last_type==="TK_RESERVED"||last_type==="TK_WORD"){if(last_type==="TK_RESERVED"&&in_array(flags.last_text,["get","set","new","return"])){output_space_before_token=true}else{print_newline()}}else if(last_type==="TK_OPERATOR"||flags.last_text==="="){output_space_before_token=true}else if(is_expression(flags.mode)){}else{print_newline()}}if(last_type==="TK_COMMA"||last_type==="TK_START_EXPR"||last_type==="TK_EQUALS"||last_type==="TK_OPERATOR"){if(!start_of_object_property()){allow_wrap_or_preserved_newline()}}if(token_type==="TK_RESERVED"&&token_text==="function"){print_token();flags.last_word=token_text;return}prefix="NONE";if(last_type==="TK_END_BLOCK"){if(!(token_type==="TK_RESERVED"&&in_array(token_text,["else","catch","finally"]))){prefix="NEWLINE"}else{if(opt.brace_style==="expand"||opt.brace_style==="end-expand"){prefix="NEWLINE"}else{prefix="SPACE";output_space_before_token=true}}}else if(last_type==="TK_SEMICOLON"&&flags.mode===MODE.BlockStatement){prefix="NEWLINE"}else if(last_type==="TK_SEMICOLON"&&is_expression(flags.mode)){prefix="SPACE"}else if(last_type==="TK_STRING"){prefix="NEWLINE"}else if(last_type==="TK_RESERVED"||last_type==="TK_WORD"){prefix="SPACE"}else if(last_type==="TK_START_BLOCK"){prefix="NEWLINE"}else if(last_type==="TK_END_EXPR"){output_space_before_token=true;prefix="NEWLINE"}if(token_type==="TK_RESERVED"&&in_array(token_text,line_starters)&&flags.last_text!==")"){if(flags.last_text==="else"){prefix="SPACE"}else{prefix="NEWLINE"}}if(token_type==="TK_RESERVED"&&in_array(token_text,["else","catch","finally"])){if(last_type!=="TK_END_BLOCK"||opt.brace_style==="expand"||opt.brace_style==="end-expand"){print_newline()}else{trim_output(true);var line=output_lines[output_lines.length-1];if(line.text[line.text.length-1]!=="}"){print_newline()}output_space_before_token=true}}else if(prefix==="NEWLINE"){if(last_type==="TK_RESERVED"&&is_special_word(flags.last_text)){output_space_before_token=true}else if(last_type!=="TK_END_EXPR"){if((last_type!=="TK_START_EXPR"||!(token_type==="TK_RESERVED"&&in_array(token_text,["var","let","const"])))&&flags.last_text!==":"){if(token_type==="TK_RESERVED"&&token_text==="if"&&flags.last_word==="else"&&flags.last_text!=="{"){output_space_before_token=true}else{print_newline()}}}else if(token_type==="TK_RESERVED"&&in_array(token_text,line_starters)&&flags.last_text!==")"){print_newline()}}else if(is_array(flags.mode)&&flags.last_text===","&&last_last_text==="}"){print_newline()}else if(prefix==="SPACE"){output_space_before_token=true}print_token();flags.last_word=token_text;if(token_type==="TK_RESERVED"&&token_text==="do"){flags.do_block=true}if(token_type==="TK_RESERVED"&&token_text==="if"){flags.if_block=true}}function handle_semicolon(){if(start_of_statement()){output_space_before_token=false}while(flags.mode===MODE.Statement&&!flags.if_block&&!flags.do_block){restore_mode()}print_token();if(flags.mode===MODE.ObjectLiteral){flags.mode=MODE.BlockStatement}}function handle_string(){if(start_of_statement()){output_space_before_token=true}else if(last_type==="TK_RESERVED"||last_type==="TK_WORD"){output_space_before_token=true}else if(last_type==="TK_COMMA"||last_type==="TK_START_EXPR"||last_type==="TK_EQUALS"||last_type==="TK_OPERATOR"){if(!start_of_object_property()){allow_wrap_or_preserved_newline()}}else{print_newline()}print_token()}function handle_equals(){if(flags.declaration_statement){flags.declaration_assignment=true}output_space_before_token=true;print_token();output_space_before_token=true}function handle_comma(){if(flags.declaration_statement){if(is_expression(flags.parent.mode)){flags.declaration_assignment=false}print_token();if(flags.declaration_assignment){flags.declaration_assignment=false;print_newline(false,true)}else{output_space_before_token=true}return}if(last_type==="TK_END_BLOCK"&&flags.mode!==MODE.Expression){print_token();if(flags.mode===MODE.ObjectLiteral&&flags.last_text==="}"){print_newline()}else{output_space_before_token=true}}else{if(flags.mode===MODE.ObjectLiteral){print_token();print_newline()}else{print_token();output_space_before_token=true}}}function handle_operator(){var space_before=true;var space_after=true;if(last_type==="TK_RESERVED"&&is_special_word(flags.last_text)){output_space_before_token=true;print_token();return}if(token_text==="*"&&last_type==="TK_DOT"&&!last_last_text.match(/^\d+$/)){print_token();return}if(token_text===":"&&flags.in_case){flags.case_body=true;indent();print_token();print_newline();flags.in_case=false;return}if(token_text==="::"){print_token();return}if(input_wanted_newline&&(token_text==="--"||token_text==="++")){print_newline()}if(last_type==="TK_OPERATOR"){allow_wrap_or_preserved_newline()}if(in_array(token_text,["--","++","!"])||in_array(token_text,["-","+"])&&(in_array(last_type,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||in_array(flags.last_text,line_starters)||flags.last_text===",")){space_before=false;space_after=false;if(flags.last_text===";"&&is_expression(flags.mode)){space_before=true}if(last_type==="TK_RESERVED"){space_before=true}if((flags.mode===MODE.BlockStatement||flags.mode===MODE.Statement)&&(flags.last_text==="{"||flags.last_text===";")){print_newline()}}else if(token_text===":"){if(flags.ternary_depth===0){if(flags.mode===MODE.BlockStatement){flags.mode=MODE.ObjectLiteral}space_before=false}else{flags.ternary_depth-=1}}else if(token_text==="?"){flags.ternary_depth+=1}output_space_before_token=output_space_before_token||space_before;print_token();output_space_before_token=space_after}function handle_block_comment(){var lines=split_newlines(token_text);var j;var javadoc=false;print_newline(false,true);if(lines.length>1){if(all_lines_start_with(lines.slice(1),"*")){javadoc=true}}print_token(lines[0]);for(j=1;j<lines.length;j++){print_newline(false,true);if(javadoc){print_token(" "+trim(lines[j]))}else{output_lines[output_lines.length-1].text.push(lines[j])}}print_newline(false,true)}function handle_inline_comment(){output_space_before_token=true;print_token();output_space_before_token=true}function handle_comment(){if(input_wanted_newline){print_newline(false,true)}else{trim_output(true)}output_space_before_token=true;print_token();print_newline(false,true)}function handle_dot(){if(last_type==="TK_RESERVED"&&is_special_word(flags.last_text)){output_space_before_token=true}else{allow_wrap_or_preserved_newline(flags.last_text===")"&&opt.break_chained_methods)}print_token()}function handle_unknown(){print_token();if(token_text[token_text.length-1]==="\n"){print_newline()}}}if(typeof define==="function"&&define.amd){define([],function(){return{js_beautify:js_beautify}})}else if(typeof exports!=="undefined"){exports.js_beautify=js_beautify}else if(typeof window!=="undefined"){window.js_beautify=js_beautify}else if(typeof global!=="undefined"){global.js_beautify=js_beautify}})()}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],7:[function(_dereq_,module,exports){var window=_dereq_("global/window");var once=_dereq_("once");var messages={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"};var XHR=window.XMLHttpRequest||noop;var XDR="withCredentials"in new XHR?window.XMLHttpRequest:window.XDomainRequest;module.exports=createXHR;function createXHR(options,callback){if(typeof options==="string"){options={uri:options}}options=options||{};callback=once(callback);var xhr=options.xhr||null;if(!xhr&&options.cors){xhr=new XDR}else if(!xhr){xhr=new XHR}var uri=xhr.url=options.uri||options.url;var method=xhr.method=options.method||"GET";var body=options.body||options.data;var headers=xhr.headers=options.headers||{};var sync=!!options.sync;var isJson=false;var key;if("json"in options){isJson=true;headers["Accept"]="application/json";if(method!=="GET"&&method!=="HEAD"){headers["Content-Type"]="application/json";
body=JSON.stringify(options.json)}}xhr.onreadystatechange=readystatechange;xhr.onload=load;xhr.onerror=error;xhr.onprogress=function(){};xhr.ontimeout=noop;xhr.open(method,uri,!sync);if(options.cors){xhr.withCredentials=true}if(!sync){xhr.timeout="timeout"in options?options.timeout:5e3}if(xhr.setRequestHeader){for(key in headers){if(headers.hasOwnProperty(key)){xhr.setRequestHeader(key,headers[key])}}}if("responseType"in options){xhr.responseType=options.responseType}xhr.send(body);return xhr;function readystatechange(){if(xhr.readyState===4){load()}}function load(){var error=null;var status=xhr.statusCode=xhr.status;var body=xhr.body=xhr.response||xhr.responseText||xhr.responseXML;if(status===1223){status=204}if(status===0||status>=400&&status<600){var message=xhr.responseText||messages[String(xhr.status).charAt(0)];error=new Error(message);error.statusCode=xhr.status}if(isJson){try{body=xhr.body=JSON.parse(body)}catch(e){}}callback(error,xhr,body)}function error(evt){callback(evt,xhr)}}function noop(){}},{"global/window":8,once:9}],8:[function(_dereq_,module,exports){(function(global){if(typeof window!=="undefined"){module.exports=window}else if(typeof global!=="undefined"){module.exports=global}else{module.exports={}}}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],9:[function(_dereq_,module,exports){module.exports=once;once.proto=once(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return once(this)},configurable:true})});function once(fn){var called=false;return function(){if(called)return;called=true;return fn.apply(this,arguments)}}},{}]},{},[1])(1)});